"use strict";const inputPalette1=document.querySelector(".js-form-palette1"),inputPalette2=document.querySelector(".js-form-palette2"),inputPalette3=document.querySelector(".js-form-palette3"),inputPalette4=document.querySelector(".js-form-palette4"),card=document.querySelector(".js-card");function paintPalette(){card.classList.remove("js-card-palette1"),card.classList.remove("js-card-palette2"),card.classList.remove("js-card-palette3"),card.classList.remove("js-card-palette4");const e=document.querySelector(".design__form--radio:checked").value;card.classList.add("js-card-palette"+e)}inputPalette1.addEventListener("click",doAll),inputPalette2.addEventListener("click",doAll),inputPalette3.addEventListener("click",doAll),inputPalette4.addEventListener("click",doAll);const formFill=document.querySelector("#js-form-fill"),defaultName="Nombre Apellido",defaultJob="Profesión",cardNameElement=document.querySelector(".js-card-name"),inputNameElement=document.querySelector(".js-form-name"),cardJobElement=document.querySelector(".js-card-job"),inputJobElement=document.querySelector(".js-form-job");function nameData(){const e=inputNameElement.value;cardNameElement.innerHTML=e||defaultName}function jobData(){const e=inputJobElement.value;cardJobElement.innerHTML=e||defaultJob}inputNameElement.addEventListener("keyup",doAll),inputJobElement.addEventListener("keyup",doAll);const resetButton=document.querySelector(".js-reset-button");function resetButtonHandler(){const e=document.querySelector("#js-form-design");formFill.reset(),e.reset(),picture="",doAll()}resetButton.addEventListener("click",resetButtonHandler);const inputLinkedinElement=document.querySelector(".js-form-linkedin"),linkedin=document.querySelector(".js-card-linkedin"),inputGithubElement=document.querySelector(".js-form-github"),github=document.querySelector(".js-card-github"),inputEmailElement=document.querySelector(".js-form-email"),email=document.querySelector(".js-card-email"),inputTelElement=document.querySelector(".js-form-tel"),tel=document.querySelector(".js-card-tel"),filter=document.querySelector(".js-items--filter"),iconLinkedin=document.querySelector(".js-linkedin"),iconGithub=document.querySelector(".js-github"),iconEmail=document.querySelector(".js-email"),iconTel=document.querySelector(".js-tel");function formIcon(){const e=inputLinkedinElement.value;linkedin.href=`https://www.linkedin.com/in/${e}`;const t=inputGithubElement.value;github.href=`https://github.com/${t}`;const n=inputEmailElement.value;email.href=`mailto:${n}`;const l=inputTelElement.value;tel.href=l,e?iconLinkedin.classList.remove("js-items--filter"):iconLinkedin.classList.add("js-items--filter"),t?iconGithub.classList.remove("js-items--filter"):iconGithub.classList.add("js-items--filter"),n?iconEmail.classList.remove("js-items--filter"):iconEmail.classList.add("js-items--filter"),l?iconTel.classList.remove("js-items--filter"):iconTel.classList.add("js-items--filter")}function doAll(){paintPalette(),nameData(),jobData(),formIcon(),checkForm(),previewImage(),setToLocalStorage()}inputLinkedinElement.addEventListener("keyup",doAll),inputGithubElement.addEventListener("keyup",doAll),inputEmailElement.addEventListener("keyup",doAll),inputTelElement.addEventListener("keyup",doAll);const fr=new FileReader,uploadBtn=document.querySelector(".js-uploadBtn"),fileField=document.querySelector(".js-file-input"),profileImage=document.querySelector(".js-image-profile"),profilePreview=document.querySelector(".js-preview");function getImage(e){const t=e.currentTarget.files[0];fr.addEventListener("load",setImage),fr.readAsDataURL(t)}let picture="";function setImage(){picture=fr.result,doAll()}function previewImage(){""===picture?(profileImage.style.backgroundImage="url(http://localhost:3000/assets/images/paquita.jpg)",profilePreview.style.backgroundImage="url()"):(profileImage.style.backgroundImage=`url(${picture})`,profilePreview.style.backgroundImage=`url(${picture})`)}function fakeFileClick(e){e.preventDefault(),fileField.click()}uploadBtn.addEventListener("click",fakeFileClick),fileField.addEventListener("change",getImage);const shareButton=document.querySelector(".js-share-button"),form=document.querySelector(".js-form");function checkForm(){!0===form.checkValidity()?(shareButton.classList.remove("js-button--filter"),shareButton.removeAttribute("disabled")):(shareButton.classList.add("js-button--filter"),twitterContainer.classList.add("js-share--url"))}const shareButtonOk=document.querySelector(".js-share-button"),twitterContainer=document.querySelector(".js-share--url");let cardUrl="";function sendRequest(e){console.log("entroooo"),fetch("https://us-central1-awesome-cards-cf6f0.cloudfunctions.net/card",{method:"POST",body:JSON.stringify(e),headers:{"Content-Type":"application/json"}}).then(function(e){return e.json()}).then(function(e){showURL(e)}).catch(function(e){console.log(e)})}const responseURL=document.querySelector(".js-notification-link");function showURL(e){e.success?responseURL.innerHTML="<a href="+e.cardURL+">"+e.cardURL+"</a>":responseURL.innerHTML="ERROR:"+e.error}function showTwitter(){!0===form.checkValidity()?twitterContainer.classList.remove("js-share--url"):(twitterContainer.classList.add("js-share--url"),alert("Ey! Faltan info, revisa tus datos.")),sendRequest()}shareButtonOk.addEventListener("click",showTwitter);const buttonTwitter=document.querySelector(".js__button-Twitter");function openTwitter(){const e=cardUrl;buttonTwitter.href="https://twitter.com/intent/tweet?url="+encodeURIComponent(e)+"&text="+encodeURIComponent("¡Hola! Esta es mi tarjeta de contacto. Saludos!")+"&hashtags="+encodeURIComponent("adalab,CardToGo,promoHamilton,thereisnoplanetb")}buttonTwitter.addEventListener("click",openTwitter);const collapsableTriggers=document.querySelectorAll(".js-collapsable--trigger");function updateCollapsable(e){const t=e.currentTarget.parentElement;if(t.classList.contains("js-collapsable-open"))t.classList.remove("js-collapsable-open");else{for(let e=0;e<collapsableTriggers.length;e++)collapsableTriggers[e].parentElement.classList.remove("js-collapsable-open");t.classList.add("js-collapsable-open"),window.scroll(0,100)}}for(let e=0;e<collapsableTriggers.length;e++)collapsableTriggers[e].addEventListener("click",updateCollapsable);const formContainer=document.querySelector(".js-form"),getDataObj=function(){const e=document.querySelector('input[name="palette"]:checked');return{name:inputNameElement.value,job:inputJobElement.value,linkedin:inputLinkedinElement.value,github:inputGithubElement.value,email:inputEmailElement.value,tel:inputTelElement.value,palette:parseInt(e.value),photo:picture}},setToLocalStorage=function(){const e=getDataObj();localStorage.setItem("userData",JSON.stringify(e))},getFromLocalStorage=function(){const e=JSON.parse(localStorage.getItem("userData"));null!==e&&(inputNameElement.value=e.name,inputJobElement.value=e.job,inputLinkedinElement.value=e.linkedin,inputGithubElement.value=e.github,inputEmailElement.value=e.email,inputTelElement.value=e.tel,picture=e.photo,document.querySelector(`input[name="palette"][value="${e.palette}"]`).checked=!0)};getFromLocalStorage(),doAll();